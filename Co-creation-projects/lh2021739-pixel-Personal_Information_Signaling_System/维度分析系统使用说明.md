# 维度分析系统使用说明（V1 简化版）

## 功能概述

维度分析系统可以：
1. 收集和分析用户记录（日报/周报/月报）中的维度数据
2. 统计维度出现频率
3. 自动生成维度管理建议（新增/删除/优先级调整）
4. 支持用户交互确认建议
5. 记录维度演化历史

## 快速开始

### 1. 准备数据

确保你的日报 JSON 文件包含 `dimensions` 字段（可选）：

```json
{
  "date": "2025-12-28",
  "themes_used": ["mcp", "agent"],
  "dimensions": ["健康", "情绪", "工作"],  // 新增字段
  "top3": [...],
  "action": "...",
  "risk": "..."
}
```

### 2. 配置文件

创建 `dimension_config.json` 配置文件（如果不存在，系统会自动创建默认配置）：

```json
{
  "active_dimensions": [
    {
      "name": "健康",
      "priority": 0.75,
      "added_date": "2025-12-01",
      "last_seen": null
    }
  ],
  "candidate_dimensions": ["娱乐", "学习"],
  "removed_dimensions": []
}
```

### 3. 运行分析

```bash
# 基本分析（生成报告）
python analyze_dimensions.py

# 交互模式（查看并处理建议）
python analyze_dimensions.py --interactive

# 显示历史记录
python analyze_dimensions.py --show-history

# 组合使用
python analyze_dimensions.py --interactive --show-history
```

## 输出结果

### 分析报告

分析报告保存在 `archive/dimension_analysis/YYYY-MM-DD_analysis.json`，包含：

- `dimension_statistics`: 维度统计信息（频率、出现日期等）
- `suggestions`: 系统生成的建议
  - `add`: 新增维度建议
  - `remove`: 删除维度建议
  - `priority_adjustment`: 优先级调整建议
- `history_summary`: 历史记录摘要

### 配置文件

- `dimension_config.json`: 维度配置（活跃维度、候选维度等）
- `dimension_history.json`: 维度演化历史记录

## 建议生成规则

1. **新增维度建议**：候选维度列表中，超过30天未在记录中出现
2. **删除维度建议**：活跃维度中，超过60天未在记录中出现
3. **优先级调整建议**：维度出现频率 > 70%，但当前优先级 < 频率

## 优先级计算

优先级 = 出现频率 = 维度出现次数 / 总记录数

范围：0.0 - 1.0

## 交互模式

使用 `--interactive` 参数时，系统会：

1. 展示所有建议
2. 对每个建议询问：接受 (y) / 拒绝 (n)
3. 应用用户接受的建议
4. 更新配置文件和历史记录

## 示例

```bash
# 运行分析
$ python analyze_dimensions.py

======================================================================
维度分析工具 - V1 简化版
======================================================================

📂 正在加载记录...
✅ 加载完成:
   - 日报: 2 条
   - 周报: 0 条
   - 月报: 0 条
   - 总计: 2 条

📊 正在分析维度...
✅ 发现 3 个维度
   维度频率统计（Top 5）:
   - 工作: 2次 (100.0%)
   - 健康: 1次 (50.0%)
   - 情绪: 1次 (50.0%)

💡 正在生成建议...
✅ 生成 4 条建议

💾 分析报告已保存到: archive/dimension_analysis/2025-12-28_analysis.json

✅ 分析完成！
```

## 注意事项

1. **向后兼容**：如果日报 JSON 中没有 `dimensions` 字段，系统会自动添加空数组
2. **数据格式**：周报和月报使用相同的 JSON 格式（可选）
3. **配置文件**：如果配置文件不存在，系统会使用默认配置
4. **历史记录**：历史记录会自动保存，可以随时查看

## 文件结构

```
Personal_Information_Signaling_System/
├── dimension_analysis.py          # 核心模块
├── analyze_dimensions.py          # 主脚本
├── dimension_config.json          # 维度配置
├── dimension_history.json         # 历史记录
├── archive/
│   ├── youtube/                   # 日报数据
│   └── dimension_analysis/        # 分析报告
│       └── YYYY-MM-DD_analysis.json
└── 维度分析系统使用说明.md        # 本文件
```

