<!-- ä»ªè¡¨æ¿æ¨¡æ¿ -->
<div class="dashboard fade-in">
    <div class="dashboard-header">
        <h1>ç ”åˆ›Â·æ™ºæ ¸ä»ªè¡¨æ¿</h1>
        <p>æ¬¢è¿ä½¿ç”¨æ™ºèƒ½ç§‘ç ”åŠ©æ‰‹å¹³å°</p>
    </div>

    <!-- ç»Ÿè®¡å¡ç‰‡ -->
    <div class="stats-section">
        <h2>æ•°æ®æ¦‚è§ˆ</h2>
        <div id="stats-container" class="stats-grid">
            <!-- ç»Ÿè®¡æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        </div>
    </div>

    <!-- å¿«é€Ÿæ“ä½œ -->
    <div class="quick-actions">
        <h2>å¿«é€Ÿæ“ä½œ</h2>
        <div class="action-grid">
            <div class="action-card" data-action="show-modal" data-target="literature-search-modal">
                <div class="action-icon">ğŸ”</div>
                <h3>æ–‡çŒ®æœç´¢</h3>
                <p>æ™ºèƒ½æœç´¢ç›¸å…³æ–‡çŒ®</p>
            </div>
            <div class="action-card" data-action="show-modal" data-target="paper-analysis-modal">
                <div class="action-icon">ğŸ“Š</div>
                <h3>è®ºæ–‡åˆ†æ</h3>
                <p>æ·±åº¦åˆ†æè®ºæ–‡å†…å®¹</p>
            </div>
            <div class="action-card" data-action="show-modal" data-target="academic-writing-modal">
                <div class="action-icon">âœï¸</div>
                <h3>å­¦æœ¯å†™ä½œ</h3>
                <p>è¾…åŠ©ç”Ÿæˆå­¦æœ¯æ–‡æ¡£</p>
            </div>
            <div class="action-card" data-action="navigate" data-target="/papers/new">
                <div class="action-icon">ğŸ“„</div>
                <h3>æ·»åŠ è®ºæ–‡</h3>
                <p>æ‰‹åŠ¨æ·»åŠ è®ºæ–‡ä¿¡æ¯</p>
            </div>
        </div>
    </div>

    <!-- æœ€è¿‘ä»»åŠ¡ -->
    <div class="recent-tasks">
        <h2>æœ€è¿‘ä»»åŠ¡</h2>
        <div id="recent-tasks-container">
            <!-- æœ€è¿‘ä»»åŠ¡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
        </div>
        <div class="view-all">
            <a href="/tasks" class="btn btn-outline">æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡</a>
        </div>
    </div>

    <!-- ç³»ç»ŸçŠ¶æ€ -->
    <div class="system-status">
        <h2>ç³»ç»ŸçŠ¶æ€</h2>
        <div class="status-grid">
            <div class="status-item">
                <div class="status-indicator status-online"></div>
                <span>APIæœåŠ¡</span>
                <span class="status-text">åœ¨çº¿</span>
            </div>
            <div class="status-item">
                <div class="status-indicator status-online"></div>
                <span>å‘é‡æ•°æ®åº“</span>
                <span class="status-text">æ­£å¸¸</span>
            </div>
            <div class="status-item">
                <div class="status-indicator status-online"></div>
                <span>æ™ºèƒ½ä½“æœåŠ¡</span>
                <span class="status-text">è¿è¡Œä¸­</span>
            </div>
            <div class="status-item">
                <div class="status-indicator status-warning"></div>
                <span>å­˜å‚¨ç©ºé—´</span>
                <span class="status-text">75%</span>
            </div>
        </div>
    </div>
</div>

<!-- æ–‡çŒ®æœç´¢æ¨¡æ€æ¡† -->
<div id="literature-search-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">æ™ºèƒ½æ–‡çŒ®æœç´¢</h3>
            <button class="modal-close" data-action="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form class="ajax-form" data-endpoint="/tasks" data-method="POST" data-redirect="/tasks/{id}">
                <div class="form-group">
                    <label class="form-label">æœç´¢å…³é”®è¯</label>
                    <input type="text" name="query" class="form-control" placeholder="è¾“å…¥æœç´¢å…³é”®è¯..." required>
                </div>
                <div class="form-group">
                    <label class="form-label">æœ€å¤§è®ºæ–‡æ•°é‡</label>
                    <select name="max_papers" class="form-select">
                        <option value="10">10ç¯‡</option>
                        <option value="20" selected>20ç¯‡</option>
                        <option value="50">50ç¯‡</option>
                        <option value="100">100ç¯‡</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">å‘è¡¨å¹´ä»½èŒƒå›´</label>
                    <div class="year-range">
                        <input type="number" name="year_start" class="form-control" placeholder="èµ·å§‹å¹´ä»½" min="1900" max="2024">
                        <span>è‡³</span>
                        <input type="number" name="year_end" class="form-control" placeholder="ç»“æŸå¹´ä»½" min="1900" max="2024">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">æœŸåˆŠ/ä¼šè®®</label>
                    <input type="text" name="venues" class="form-control" placeholder="è¾“å…¥æœŸåˆŠæˆ–ä¼šè®®åç§°ï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”">
                </div>
                <input type="hidden" name="title" value="æ–‡çŒ®æœç´¢ä»»åŠ¡">
                <input type="hidden" name="task_type" value="literature_search">
                <input type="hidden" name="priority" value="medium">
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline" data-action="close-modal">å–æ¶ˆ</button>
            <button type="submit" form="ajax-form" class="btn btn-primary">å¼€å§‹æœç´¢</button>
        </div>
    </div>
</div>

<!-- è®ºæ–‡åˆ†ææ¨¡æ€æ¡† -->
<div id="paper-analysis-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">è®ºæ–‡åˆ†æ</h3>
            <button class="modal-close" data-action="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form class="ajax-form" data-endpoint="/tasks" data-method="POST" data-redirect="/tasks/{id}">
                <div class="form-group">
                    <label class="form-label">é€‰æ‹©è®ºæ–‡</label>
                    <div class="paper-selector">
                        <!-- è®ºæ–‡é€‰æ‹©å™¨å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">åˆ†æç±»å‹</label>
                    <select name="analysis_type" class="form-select" required>
                        <option value="">è¯·é€‰æ‹©åˆ†æç±»å‹</option>
                        <option value="comprehensive">ç»¼åˆåˆ†æ</option>
                        <option value="methodology">æ–¹æ³•è®ºåˆ†æ</option>
                        <option value="findings">ç ”ç©¶å‘ç°åˆ†æ</option>
                        <option value="gap">ç ”ç©¶ç¼ºå£åˆ†æ</option>
                        <option value="trend">è¶‹åŠ¿åˆ†æ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">é‡ç‚¹å…³æ³¨é¢†åŸŸ</label>
                    <input type="text" name="focus_areas" class="form-control" placeholder="è¾“å…¥é‡ç‚¹å…³æ³¨é¢†åŸŸï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš”">
                </div>
                <input type="hidden" name="title" value="è®ºæ–‡åˆ†æä»»åŠ¡">
                <input type="hidden" name="task_type" value="analysis">
                <input type="hidden" name="priority" value="medium">
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline" data-action="close-modal">å–æ¶ˆ</button>
            <button type="submit" form="ajax-form" class="btn btn-primary">å¼€å§‹åˆ†æ</button>
        </div>
    </div>
</div>

<!-- å­¦æœ¯å†™ä½œæ¨¡æ€æ¡† -->
<div id="academic-writing-modal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h3 class="modal-title">å­¦æœ¯å†™ä½œåŠ©æ‰‹</h3>
            <button class="modal-close" data-action="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form class="ajax-form" data-endpoint="/tasks" data-method="POST" data-redirect="/tasks/{id}">
                <div class="form-group">
                    <label class="form-label">å†™ä½œç±»å‹</label>
                    <select name="writing_type" class="form-select" required>
                        <option value="">è¯·é€‰æ‹©å†™ä½œç±»å‹</option>
                        <option value="review">æ–‡çŒ®ç»¼è¿°</option>
                        <option value="summary">è®ºæ–‡æ€»ç»“</option>
                        <option value="critique">è®ºæ–‡è¯„è¿°</option>
                        <option value="proposal">ç ”ç©¶ææ¡ˆ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">å‚è€ƒè®ºæ–‡</label>
                    <div class="paper-selector">
                        <!-- è®ºæ–‡é€‰æ‹©å™¨å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">å†™ä½œå¤§çº²</label>
                    <textarea name="outline" class="form-control form-textarea" rows="6" placeholder="è¾“å…¥å†™ä½œå¤§çº²ï¼Œæ¯è¡Œä¸€ä¸ªç« èŠ‚..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">ç›®æ ‡å­—æ•°</label>
                    <input type="number" name="length" class="form-control" placeholder="é¢„è®¡å­—æ•°" min="100" max="10000" value="1000">
                </div>
                <div class="form-group">
                    <label class="form-label">å†™ä½œé£æ ¼</label>
                    <select name="style" class="form-select">
                        <option value="academic">å­¦æœ¯é£æ ¼</option>
                        <option value="formal">æ­£å¼é£æ ¼</option>
                        <option value="concise">ç®€æ´é£æ ¼</option>
                    </select>
                </div>
                <input type="hidden" name="title" value="å­¦æœ¯å†™ä½œä»»åŠ¡">
                <input type="hidden" name="task_type" value="writing">
                <input type="hidden" name="priority" value="medium">
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline" data-action="close-modal">å–æ¶ˆ</button>
            <button type="submit" form="ajax-form" class="btn btn-primary">å¼€å§‹å†™ä½œ</button>
        </div>
    </div>
</div>

<style>
.dashboard {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.dashboard-header {
    text-align: center;
    margin-bottom: 40px;
}

.dashboard-header h1 {
    font-size: 2.5rem;
    color: var(--primary-color);
    margin-bottom: 10px;
}

.dashboard-header p {
    font-size: 1.1rem;
    color: var(--text-muted);
}

.stats-section,
.quick-actions,
.recent-tasks,
.system-status {
    margin-bottom: 40px;
}

.stats-section h2,
.quick-actions h2,
.recent-tasks h2,
.system-status h2 {
    font-size: 1.5rem;
    margin-bottom: 20px;
    color: var(--dark-color);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.stat-card {
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: var(--shadow-md);
    text-align: center;
    transition: transform 0.2s;
}

.stat-card:hover {
    transform: translateY(-5px);
}

.stat-card h3 {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 10px;
}

.stat-card p {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.action-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}

.action-card {
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: var(--shadow-md);
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}

.action-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
}

.action-icon {
    font-size: 3rem;
    margin-bottom: 15px;
}

.action-card h3 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: var(--dark-color);
}

.action-card p {
    color: var(--text-muted);
    font-size: 0.9rem;
}

.status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.status-item {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: var(--shadow-md);
    display: flex;
    align-items: center;
    gap: 10px;
}

.status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.status-online {
    background-color: var(--success-color);
}

.status-warning {
    background-color: var(--warning-color);
}

.status-offline {
    background-color: var(--danger-color);
}

.status-text {
    margin-left: auto;
    font-weight: 500;
}

.year-range {
    display: flex;
    align-items: center;
    gap: 10px;
}

.year-range input {
    flex: 1;
}

.modal-large {
    max-width: 800px;
}

.paper-selector {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid var(--border-color);
    border-radius: 0.375rem;
    padding: 10px;
}

.view-all {
    text-align: center;
    margin-top: 20px;
}

@media (max-width: 768px) {
    .dashboard {
        padding: 10px;
    }
    
    .dashboard-header h1 {
        font-size: 2rem;
    }
    
    .stats-grid,
    .action-grid,
    .status-grid {
        grid-template-columns: 1fr;
    }
    
    .year-range {
        flex-direction: column;
    }
    
    .year-range span {
        display: none;
    }
}
</style>